<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="css/header.css">
</head>
<body>
<div id="wrapper">
    <div id="header">
        <img class="logo" src="img/月亮.png" alt="">
        <h1>红月游戏交易平台</h1>
        <hr>
    </div>
    <div id="content" style="margin-top: 50px">
        商品名称：<input type="text" name="" id="pname"><span id="pnameMsg"></span><br>
        商品价格：<input type="text" name="" id="price"><span id="priceMsg"></span><br>
        商品简介：<input type="text" name="" id="ptxt"><span id="ptxtMsg"></span><br>
        <a href="http://127.0.0.1:3000/admin_product.html" onclick="add()" style="text-decoration: none;display: block;height: 30px;line-height: 30px;width: 100px;text-align: center;background-color: red;color: #fff;margin-top: 20px;">添加商品</a>
    </div>
</div>
<script type="text/javascript">
    function add(){
        var xhr=new XMLHttpRequest;
        xhr.onreadystatechange=function(){
            if(xhr.readyState==4&&xhr.status==200){
                var result=xhr.responseText;
                if(result=='1_0'){
                    pnameMsg.innerHTML='商品名称不能为空';
                }else if(result=='2_0'){
                    priceMsg.innerHTML='商品价格不能为空';
                }else if(result=='3_0'){
                    ptxtMsg.innerHTML='商品简介不能为空';
                }else{
                    alert('添加成功！');
                    location.href="http://127.0.0.1:3000/admin_product.html";
                }
            }
        }
        xhr.open('post','/admin/product_add',true);
        formdata="pname="+pname.value+"&price="+price.value+"&ptxt="+ptxt.value;
        xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded");
        xhr.send(formdata);
    }
</script>
</body>
</html>